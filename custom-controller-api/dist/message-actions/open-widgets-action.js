System.register(["jimu-core","jimu-layouts/layout-runtime"],(function(e,t){var s={},r={};return{setters:[function(e){s.AbstractMessageAction=e.AbstractMessageAction,s.MessageType=e.MessageType,s.WidgetState=e.WidgetState,s.appActions=e.appActions,s.getAppStore=e.getAppStore},function(){}],execute:function(){e((()=>{"use strict";var e={9244:e=>{e.exports=s},1496:e=>{e.exports=r}},t={};function o(s){var r=t[s];if(void 0!==r)return r.exports;var n=t[s]={exports:{}};return e[s](n,n.exports,o),n.exports}o.d=(e,t)=>{for(var s in t)o.o(t,s)&&!o.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var n={};o.r(n),o.d(n,{default:()=>a});var i=o(9244);o(1496);class a extends i.AbstractMessageAction{constructor(){super(...arguments),this.supportedMessageTypes=[i.MessageType.ButtonClick,i.MessageType.DataRecordsSelectionChange]}filterMessageDescription(e){return this.supportedMessageTypes.includes(e.messageType)}filterMessage(e){return!0}onExecute(e,t){var s,r;const o=e.type===i.MessageType.DataRecordsSelectionChange&&0===(e.records||[]).length;if(!t||o)return Promise.resolve(!0);let n=null==t?void 0:t.widgetIds.asMutable();const a=null==t?void 0:t.controllerId,p=(0,i.getAppStore)().getState(),c=p.appConfig.widgets[a].config;if(null===(s=null==c?void 0:c.behavior)||void 0===s?void 0:s.onlyOpenOne){const e=null!==(r=p.widgetsRuntimeInfo)&&void 0!==r?r:{},t=Object.keys(e).filter((t=>{const s=e[t];return s.controllerWidgetId===a&&(e=>[i.WidgetState.Opened,i.WidgetState.Active].includes(e.state))(s)}));t.length>0&&(0,i.getAppStore)().dispatch(i.appActions.closeWidgets(t)),n.length>1&&(n=n.slice(0,1))}return(0,i.getAppStore)().dispatch(i.appActions.openWidgets(n,a)),Promise.resolve(!0)}}return n})())}}}));