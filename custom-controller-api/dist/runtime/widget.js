System.register(["jimu-core","jimu-ui","jimu-theme","jimu-layouts/layout-runtime"],(function(e,t){var o={},i={},a={},n={};return{setters:[function(e){o.AppMode=e.AppMode,o.BaseVersionManager=e.BaseVersionManager,o.ContainerType=e.ContainerType,o.ErrorBoundary=e.ErrorBoundary,o.Immutable=e.Immutable,o.LayoutItemType=e.LayoutItemType,o.React=e.React,o.ReactRedux=e.ReactRedux,o.WidgetManager=e.WidgetManager,o.WidgetState=e.WidgetState,o.WidgetType=e.WidgetType,o.appActions=e.appActions,o.classNames=e.classNames,o.css=e.css,o.getAppStore=e.getAppStore,o.hooks=e.hooks,o.jsx=e.jsx,o.lodash=e.lodash,o.polished=e.polished},function(e){i.Button=e.Button,i.FloatingPanel=e.FloatingPanel,i.Icon=e.Icon,i.Loading=e.Loading,i.MobilePanel=e.MobilePanel,i.NavButtonGroup=e.NavButtonGroup,i.Popper=e.Popper,i.Tooltip=e.Tooltip,i.defaultMessages=e.defaultMessages,i.styleUtils=e.styleUtils,i.utils=e.utils},function(e){a.styled=e.styled},function(e){n.searchUtils=e.searchUtils}],execute:function(){e((()=>{var e={9859:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 20"><path fill="#000" d="M4 4h2v1H4zM8 4h2v1H8zM14 4h-2v1h2zM15 4h1v2h-1zM16 8h-1v2h1zM4 14h1v2H4zM5 6H4v2h1zM4 10h1v2H4zM16 12h-1v2h1zM16 15v1h-2v-1zM12 15h-2v1h2zM6 15h2v1H6z"></path><path fill="#000" fill-rule="evenodd" d="M18 0a2 2 0 0 1 2 2v16a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V2a2 2 0 0 1 2-2zm0 1H2a1 1 0 0 0-1 1v16a1 1 0 0 0 1 1h16a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1" clip-rule="evenodd"></path></svg>'},2838:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" d="m8.745 8 6.1 6.1a.527.527 0 1 1-.745.746L8 8.746l-6.1 6.1a.527.527 0 1 1-.746-.746l6.1-6.1-6.1-6.1a.527.527 0 0 1 .746-.746l6.1 6.1 6.1-6.1a.527.527 0 0 1 .746.746z"></path></svg>'},9839:e=>{e.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTA5IiBoZWlnaHQ9IjQyIiB2aWV3Qm94PSIwIDAgMTA5IDQyIiBmaWxsPSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgo8cmVjdCB3aWR0aD0iMTA5IiBoZWlnaHQ9IjQyIiByeD0iNiIgZmlsbD0id2hpdGUiLz4KPHBhdGggZD0iTTQ3LjQ5NiAxNS4yN0g1MS4zMDRWMTYuNDZINDcuNDk2VjE1LjI3Wk00Ny40OTYgMTguMzVINTEuMzA0VjE5LjU0SDQ3LjQ5NlYxOC4zNVpNNTAuNzcyIDEzLjM4SDUyLjI0MlYyMi43ODhINTAuNzcyVjEzLjM4Wk00My45NTQgMjQuNzJINTIuNTY0VjI1LjkxSDQzLjk1NFYyNC43MlpNNDMuOTU0IDIxLjgzNkg0NS40MVYyNS4yOTRINDMuOTU0VjIxLjgzNlpNNDUuMTQ0IDE0LjE2NEM0Ny4wMzQgMTQuMTY0IDQ4LjQ3NiAxNS41MDggNDguNDc2IDE3LjQxMkM0OC40NzYgMTkuMzAyIDQ3LjAzNCAyMC42NiA0NS4xNDQgMjAuNjZDNDMuMjU0IDIwLjY2IDQxLjgxMiAxOS4zMDIgNDEuODEyIDE3LjQxMkM0MS44MTIgMTUuNTA4IDQzLjI1NCAxNC4xNjQgNDUuMTQ0IDE0LjE2NFpNNDUuMTQ0IDE1LjQ1MkM0NC4wMzggMTUuNDUyIDQzLjIxMiAxNi4yMzYgNDMuMjEyIDE3LjQxMkM0My4yMTIgMTguNTg4IDQ0LjAzOCAxOS4zNzIgNDUuMTQ0IDE5LjM3MkM0Ni4yNSAxOS4zNzIgNDcuMDc2IDE4LjU4OCA0Ny4wNzYgMTcuNDEyQzQ3LjA3NiAxNi4yMzYgNDYuMjUgMTUuNDUyIDQ1LjE0NCAxNS40NTJaTTU5LjQ2NDkgMTYuODM4SDYyLjE5NDlWMTguMDE0SDU5LjQ2NDlWMTYuODM4Wk01OS4zODA5IDIwLjA0NEg2Mi4xNTI5VjIxLjIySDU5LjM4MDlWMjAuMDQ0Wk02NC4wNDI5IDEzLjM2Nkg2NS40NTY5VjI2LjE2Mkg2NC4wNDI5VjEzLjM2NlpNNjEuNDUyOSAxMy42NzRINjIuODI0OVYyNS41NDZINjEuNDUyOVYxMy42NzRaTTU4LjU4MjkgMTQuOTM0SDU5Ljk5NjlDNTkuOTk2OSAxOC40MDYgNTguNzY0OSAyMS4zNzQgNTUuMjY0OSAyMy40NDZMNTQuNDI0OSAyMi40MUM1Ny4zNzg5IDIwLjYzMiA1OC41ODI5IDE4LjI2NiA1OC41ODI5IDE1LjIxNFYxNC45MzRaTTU1LjA2ODkgMTQuOTM0SDU5LjExNDlWMTYuMTI0SDU1LjA2ODlWMTQuOTM0Wk03NC4yNzU4IDE2LjU4Nkg3Ni45NDk4VjE3Ljc5SDc0LjI3NThWMTYuNTg2Wk03Ni41Mjk4IDEzLjM2Nkg3Ny45OTk4VjIwLjk4Mkg3Ni41Mjk4VjEzLjM2NlpNNzMuNzI5OCAyMS4zMThDNzYuNDAzOCAyMS4zMTggNzguMDQxOCAyMi4yMjggNzguMDQxOCAyMy43NEM3OC4wNDE4IDI1LjI4IDc2LjQwMzggMjYuMTYyIDczLjcyOTggMjYuMTYyQzcxLjA1NTggMjYuMTYyIDY5LjQxNzggMjUuMjggNjkuNDE3OCAyMy43NEM2OS40MTc4IDIyLjIyOCA3MS4wNTU4IDIxLjMxOCA3My43Mjk4IDIxLjMxOFpNNzMuNzI5OCAyMi40NTJDNzEuOTIzOCAyMi40NTIgNzAuODczOCAyMi45IDcwLjg3MzggMjMuNzRDNzAuODczOCAyNC41OCA3MS45MjM4IDI1LjAyOCA3My43Mjk4IDI1LjAyOEM3NS41NDk4IDI1LjAyOCA3Ni41ODU4IDI0LjU4IDc2LjU4NTggMjMuNzRDNzYuNTg1OCAyMi45IDc1LjU0OTggMjIuNDUyIDczLjcyOTggMjIuNDUyWk03MC41MjM4IDE0LjY1NEg3MS43MTM4VjE1LjU5MkM3MS43MTM4IDE3Ljk4NiA3MC40MTE4IDIwLjEgNjguMTQzOCAyMC45MTJMNjcuMzg3OCAxOS43NUM2OS4zODk4IDE5LjA1IDcwLjUyMzggMTcuMzQyIDcwLjUyMzggMTUuNTkyVjE0LjY1NFpNNzAuODE3OCAxNC42NTRINzEuOTkzOFYxNS41NzhDNzEuOTkzOCAxNy4xNzQgNzMuMDg1OCAxOC43NTYgNzUuMDAzOCAxOS40MTRMNzQuMjc1OCAyMC41NzZDNzIuMDYzOCAxOS44MDYgNzAuODE3OCAxNy43OSA3MC44MTc4IDE1LjU3OFYxNC42NTRaTTY3LjgwNzggMTQuMjM0SDc0LjY2NzhWMTUuNDFINjcuODA3OFYxNC4yMzRaTTgwLjI4MDcgMjMuMzlIOTEuODcyN1YyNC41OTRIODAuMjgwN1YyMy4zOVpNODUuMzIwNyAyMC40NzhIODYuNzc2N1YyMy43MTJIODUuMzIwN1YyMC40NzhaTTgxLjU2ODcgMTQuMjM0SDgzLjAzODdWMTYuMzc2SDg5LjA3MjdWMTQuMjM0SDkwLjUyODdWMjAuODI4SDgxLjU2ODdWMTQuMjM0Wk04My4wMzg3IDE3LjUzOFYxOS42MzhIODkuMDcyN1YxNy41MzhIODMuMDM4N1oiIGZpbGw9IiMzRDNEM0QiLz4KPHBhdGggZD0iTTIxLjk3MzkgMjIuNTUwNUMyMS4wMzIxIDIyLjU1MDUgMjAuMTQ2OCAyMi4xODM5IDE5LjQ4MDggMjEuNTE3OEMxOS4xOTk3IDIxLjIzNjggMTkuMTk5NyAyMC43ODEzIDE5LjQ4MDggMjAuNTAwNkMxOS43NjE4IDIwLjIxOTggMjAuMjE3MyAyMC4yMTk1IDIwLjQ5OCAyMC41MDA2QzIwLjg5MjEgMjAuODk0NiAyMS40MTYzIDIxLjExMTggMjEuOTczOSAyMS4xMTE4QzIyLjUzMTUgMjEuMTExOCAyMy4wNTU0IDIwLjg5NDYgMjMuNDQ5OCAyMC41MDA2TDI3Ljk1MDIgMTYuMDAwMkMyOC4zNDQzIDE1LjYwNjEgMjguNTYxNSAxNS4wODE5IDI4LjU2MTUgMTQuNTI0M0MyOC41NjE1IDEzLjk2NjcgMjguMzQ0MyAxMy40NDI4IDI3Ljk1MDIgMTMuMDQ4NEMyNy4xMzY0IDEyLjIzNDcgMjUuODEyMSAxMi4yMzQ3IDI0Ljk5ODQgMTMuMDQ4NEwyMS40OTA0IDE2LjU1NjRDMjEuMjA5MyAxNi44Mzc1IDIwLjc1MzggMTYuODM3NSAyMC40NzMxIDE2LjU1NjRDMjAuMTkyNCAxNi4yNzUzIDIwLjE5MiAxNS44MTk4IDIwLjQ3MzEgMTUuNTM5MUwyMy45ODExIDEyLjAzMTFDMjUuMzU2IDEwLjY1NjMgMjcuNTkyNiAxMC42NTYzIDI4Ljk2NzUgMTIuMDMxMUMyOS42MzM1IDEyLjY5NzEgMzAuMDAwMiAxMy41ODI1IDMwLjAwMDIgMTQuNTI0M0MzMC4wMDAyIDE1LjQ2NjEgMjkuNjMzNSAxNi4zNTE1IDI4Ljk2NzUgMTcuMDE3NUwyNC40NjcxIDIxLjUxNzhDMjMuODAxMSAyMi4xODM5IDIyLjkxNTggMjIuNTUwNSAyMS45NzM5IDIyLjU1MDVaIiBmaWxsPSIjM0QzRDNEIi8+CjxwYXRoIGQ9Ik0xNS41MjQzIDI5LjAwMDJDMTQuNTgyNSAyOS4wMDAyIDEzLjY5NzEgMjguNjMzNSAxMy4wMzExIDI3Ljk2NzVDMTEuNjU2MyAyNi41OTI2IDExLjY1NjMgMjQuMzU2IDEzLjAzMTEgMjIuOTgxMUwxNy40OTY0IDE4LjUxNThDMTguODcxMiAxNy4xNDEgMjEuMTA3OSAxNy4xNDEgMjIuNDgyNyAxOC41MTU4QzIyLjc2MzggMTguNzk2OSAyMi43NjM4IDE5LjI1MjQgMjIuNDgyNyAxOS41MzMxQzIyLjIwMTcgMTkuODEzOCAyMS43NDYyIDE5LjgxNDIgMjEuNDY1NSAxOS41MzMxQzIwLjY1MTcgMTguNzE5NCAxOS4zMjc0IDE4LjcxOTQgMTguNTEzNyAxOS41MzMxTDE0LjA0ODQgMjMuOTk4NEMxMy4yMzQ3IDI0LjgxMjEgMTMuMjM0NyAyNi4xMzY0IDE0LjA0ODQgMjYuOTUwMkMxNC40NDI1IDI3LjM0NDMgMTQuOTY2NyAyNy41NjE1IDE1LjUyNDMgMjcuNTYxNUMxNi4wODE5IDI3LjU2MTUgMTYuNjA1OCAyNy4zNDQzIDE3LjAwMDIgMjYuOTUwMkwyMC40NzMxIDIzLjQ3NzNDMjAuNzU0MiAyMy4xOTY2IDIxLjIwOTcgMjMuMTk2NiAyMS40OTA0IDIzLjQ3NzNDMjEuNzcxNSAyMy43NTg0IDIxLjc3MTUgMjQuMjEzOCAyMS40OTA0IDI0LjQ5NDZMMTguMDE3NSAyNy45Njc1QzE3LjM1MTUgMjguNjMzNSAxNi40NjYxIDI5LjAwMDIgMTUuNTI0MyAyOS4wMDAyWiIgZmlsbD0iIzNEM0QzRCIvPgo8cGF0aCBkPSJNMTUuODk0MiAxOC4zNjQzQzE1Ljc5MjQgMTguMzY0MyAxNS42ODg5IDE4LjM0MjUgMTUuNTkwNiAxOC4yOTY1TDE0LjMxOSAxNy43MDM1QzEzLjk1ODkgMTcuNTM1OCAxMy44MDMxIDE3LjEwNzcgMTMuOTcwOSAxNi43NDc2QzE0LjEzODYgMTYuMzg3NiAxNC41NjY3IDE2LjIzMTggMTQuOTI2NyAxNi4zOTk1TDE2LjE5ODQgMTYuOTkyNkMxNi41NTg0IDE3LjE2MDMgMTYuNzE0MiAxNy41ODg0IDE2LjU0NjUgMTcuOTQ4NEMxNi40MjQ0IDE4LjIxMDIgMTYuMTY1MSAxOC4zNjQzIDE1Ljg5NDIgMTguMzY0M1oiIGZpbGw9IiMzRDNEM0QiLz4KPHBhdGggZD0iTTI3LjM0MDMgMjMuNzAxOUMyNy4yMzg2IDIzLjcwMTkgMjcuMTM1IDIzLjY4MDEgMjcuMDM2OCAyMy42MzQxTDI1Ljc2NTEgMjMuMDQxMUMyNS40MDUxIDIyLjg3MyAyNS4yNDkzIDIyLjQ0NTMgMjUuNDE3IDIyLjA4NTNDMjUuNTg1MSAyMS43MjUyIDI2LjAxMjggMjEuNTY5NCAyNi4zNzI5IDIxLjczNzJMMjcuNjQ0NiAyMi4zMzAyQzI4LjAwNDYgMjIuNDk4MyAyOC4xNjA0IDIyLjkyNiAyNy45OTI3IDIzLjI4NkMyNy44NzA1IDIzLjU0NzggMjcuNjExMiAyMy43MDE5IDI3LjM0MDMgMjMuNzAxOVoiIGZpbGw9IiMzRDNEM0QiLz4KPHBhdGggZD0iTTE4LjYxMDIgMTUuNjQ5M0MxOC4zMzkzIDE1LjY0OTMgMTguMDc5OSAxNS40OTU2IDE3Ljk1NzggMTUuMjMzOEwxNy4zNjQ4IDEzLjk2MjJDMTcuMTk2NyAxMy42MDIxIDE3LjM1MjUgMTMuMTc0IDE3LjcxMjkgMTMuMDA2M0MxOC4wNzI5IDEyLjgzODIgMTguNTAxIDEyLjk5NCAxOC42Njg4IDEzLjM1NDRMMTkuMjYxOCAxNC42MjYxQzE5LjQyOTkgMTQuOTg2MSAxOS4yNzQxIDE1LjQxNDIgMTguOTEzNyAxNS41ODE5QzE4LjgxNTQgMTUuNjI3OSAxOC43MTE5IDE1LjY0OTMgMTguNjEwMiAxNS42NDkzWiIgZmlsbD0iIzNEM0QzRCIvPgo8cGF0aCBkPSJNMjMuOTQ3NCAyNy4wOTU1QzIzLjY3NjUgMjcuMDk1NSAyMy40MTcyIDI2Ljk0MTggMjMuMjk1MSAyNi42OEwyMi43MDIxIDI1LjQwODNDMjIuNTM0IDI1LjA0ODMgMjIuNjg5OCAyNC42MjAyIDIzLjA1MDIgMjQuNDUyNUMyMy40MTAyIDI0LjI4NDQgMjMuODM4MyAyNC40NDAyIDI0LjAwNiAyNC44MDA2TDI0LjU5OTEgMjYuMDcyMkMyNC43NjcxIDI2LjQzMjMgMjQuNjExMyAyNi44NjA0IDI0LjI1MSAyNy4wMjgxQzI0LjE1MjcgMjcuMDc0MSAyNC4wNDkyIDI3LjA5NTUgMjMuOTQ3NCAyNy4wOTU1WiIgZmlsbD0iIzNEM0QzRCIvPgo8L3N2Zz4K"},9244:e=>{"use strict";e.exports=o},1496:e=>{"use strict";e.exports=n},1888:e=>{"use strict";e.exports=a},4321:e=>{"use strict";e.exports=i}},t={};function l(o){var i=t[o];if(void 0!==i)return i.exports;var a=t[o]={exports:{}};return e[o](a,a.exports,l),a.exports}l.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return l.d(t,{a:t}),t},l.d=(e,t)=>{for(var o in t)l.o(t,o)&&!l.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},l.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),l.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.p="";var r={};return l.p=window.jimuConfig.baseUrl,(()=>{"use strict";l.r(r),l.d(r,{__set_webpack_public_path__:()=>ne,default:()=>ae});var e=l(9244),t=l(4321);const o="controller",i={sm:24,default:32,lg:48},a={width:150,height:120},n={width:300,height:300},s={x:70,y:70},c={x:30,y:30};var u;!function(e){e.TopLeft="TOP_LEFT",e.TopRight="TOP_RIGHT",e.BottomLeft="BOTTOM_LEFT",e.BottomRight="BOTTOM_RIGHT",e.TopCenter="TOP_CENTER",e.BottomCenter="BOTTOM_CENTER",e.MiddleLeft="MIDDLE_LEFT",e.MiddleRight="MIDDLE_RIGHT",e.MiddleCenter="MIDDLE_CENTER"}(u||(u={}));u.TopRight;const d=[{name:"preventOverflow",options:{boundary:document.body,rootBoundary:document}},{name:"offset",options:{offset:[0,16]}}];var M=function(e,t){var o={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(o[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(i=Object.getOwnPropertySymbols(e);a<i.length;a++)t.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(e,i[a])&&(o[i[a]]=e[i[a]])}return o};const g=(e,t,o)=>{let a=i[e];t&&(a+=21);return a+=2*p(e,o),a},p=(e,t)=>"circle"===t?"sm"===e||"default"===e||"lg"===e?0:void 0:0,I={none:"0",sm:"0",default:"var(--sys-shape-1)",lg:"var(--sys-shape-2)"},N=e.React.forwardRef(((o,i)=>{var a;const{label:n,className:l,title:r,showLabel:s,showIndicator:c=!0,showTooltip:u=!0,labelGrowth:d=0,icon:N,marker:v,onClick:y,onMarkerClick:j,avatar:D,autoFlip:h,active:x,editDraggable:m,disabled:T,widgetid:z}=o,O=M(o,["label","className","title","showLabel","showIndicator","showTooltip","labelGrowth","icon","marker","onClick","onMarkerClick","avatar","autoFlip","active","editDraggable","disabled","widgetid"]),w=D||{},{shape:f,style:S}=w,A=M(w,["shape","style"]),b=(null==A?void 0:A.size)||"default",L=((t,o,i,a,n)=>e.React.useMemo((()=>{g(t,o,a);const n=p(t,a);return e.css`
      display: flex;
      align-items:center;
      flex-direction: column;
      justify-content: ${o?"space-around":"center"};
      width: 5rem !important;
      height: 5rem !important;
      .tool-drag-handler {
        cursor: auto;
      }
      .avatar {
        padding: ${n}px;
        position: relative;
        text-align: center;
        &:hover .marker {
          visibility: visible;
        }
        .marker {
          position: absolute;
          right: 0;
          top: 0;
          padding: 0;
          border-radius: 50%;
          display: flex;
          align-items: center;
          justify-content: center;
          .icon-btn-sizer {
            min-width: 3rem !important;
            min-height: 3rem !important;
          }
          visibility: hidden;
        }
      }
      ${i?".avatar.active {\n        .avatar-button, .marker {\n          transform: translateY(-7px);\n        }\n        .marker {\n          z-index: 1;\n        }\n        ::after {\n          content: '';\n          position: absolute;\n          bottom: 0;\n          left: 50%;\n          transform: translateX(-50%);\n          border: 1px solid var(--ref-palette-white);\n          border-radius: 3px;\n          width: 6px;\n          height: 3px;\n          background-color: var(--sys-color-primary-main);\n          box-sizing: content-box;\n        }\n      }":""}
      .avatar-label {
        text-align: center;
        width: 100%;
        min-height: ${e.polished.rem(21)};
        cursor: default;
      }
    `}),[t,o,a,n,i]))(b,s,c,f,d),E=I[b],C=(0,e.jsx)(t.Button,Object.assign({"data-widgetid":z,icon:!0,active:x,className:(0,e.classNames)("avatar-button",{disabled:T}),ref:i},A,{style:Object.assign({borderRadius:"circle"===f?"50%":E},S),onClick:y}),(0,e.jsx)(t.Icon,{color:"string"!=typeof N&&(null===(a=N.properties)||void 0===a?void 0:a.color),icon:"string"!=typeof N?N.svg:N,autoFlip:h}));return(0,e.jsx)("div",Object.assign({},O,{className:(0,e.classNames)("avatar-card",`${l} avatar-card`),css:L}),(0,e.jsx)("div",{className:(0,e.classNames)({"no-drag-action":!m,active:x},"avatar tool-drag-handler")},v&&(0,e.jsx)(t.Button,{className:"marker",size:"sm",icon:!0,onClick:j},(0,e.jsx)(t.Icon,{size:8,icon:v})),u?(0,e.jsx)(t.Tooltip,{title:r||n,style:{pointerEvents:"none"}},C):C),s&&(0,e.jsx)("div",{className:(0,e.classNames)("avatar-label text-truncate",{active:x})},n))})),v=(t,o,i=0,a=i,n)=>{let l=((t,o=500,i=!1,a)=>{var n,l;const r=i?"clientHeight":"clientWidth",[s,c]=e.React.useState(null!==(l=null===(n=t.current)||void 0===n?void 0:n[r])&&void 0!==l?l:0),u=!a&&!window.jimuConfig.isInBuilder,d=e.hooks.useLatest((()=>{const e=t.current[r]||0;c(e)})),M=e.React.useMemo((()=>e.lodash.debounce((()=>{d.current()}),o,{leading:!0})),[]);return e.React.useEffect((()=>{if(u)return;const e=t.current;e&&M();const o=new ResizeObserver(M);return o.observe(e),()=>{o.disconnect(),M.cancel()}}),[t,M,u]),s})(t,500,o,!n);l+=i,l=Math.max(l,a);const r=((t=500,o=!1)=>{const i=o?"clientHeight":"clientWidth",[a,n]=e.React.useState((()=>document.body[i]-40));e.hooks.useUpdateEffect((()=>{n(document.body[i]-40)}),[i]);const l=e.React.useMemo((()=>e.lodash.debounce((()=>{n(document.body[i]-40)}),t)),[i,t]);return e.React.useEffect((()=>(window.addEventListener("resize",l),()=>{window.removeEventListener("resize",l)})),[l]),a})(500,o);return l=n?r:Math.min(l,r),l},y=(e,t,o)=>{let i=e,a=t;return a-i>o?a=e+o:a-i<o&&(i=0,a=i+o),[i,a]};var j=function(e,t){var o={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(o[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(i=Object.getOwnPropertySymbols(e);a<i.length;a++)t.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(e,i[a])&&(o[i[a]]=e[i[a]])}return o};const D=[],h=e.React.forwardRef(((o,i)=>{const{scrollRef:a,className:n,lists:l=D,createItem:r,vertical:s,itemLength:c,space:u,onChange:d,autoHideArrow:M,minLength:g=c,autoScrollEnd:p,autoSize:I,onScrollStatusChange:N}=o,h=j(o,["scrollRef","className","lists","createItem","vertical","itemLength","space","onChange","autoHideArrow","minLength","autoScrollEnd","autoSize","onScrollStatusChange"]),x=e.hooks.useTranslation(t.defaultMessages),[m,T]=e.hooks.useForwardRef(i),{start:z,end:O,disablePrevious:w,disableNext:f,hideArrow:S,scroll:A}=(t=>{var o;const{rootRef:i,lists:a,itemLength:n,autoSize:l,vertical:r,space:s,minLength:c,autoScrollEnd:u}=t,d=null!==(o=null==a?void 0:a.length)&&void 0!==o?o:0,M=v(i,r,s,c,l),g=Math.floor(M/n)>d?d:Math.floor(M/n),[p,I]=e.React.useState(y(0,0,g)[0]),[N,j]=e.React.useState(y(0,0,g)[1]),D=e.hooks.useLatest(p),h=e.hooks.useLatest(N),x=N-p>=d,m=0===p,T=N===d;e.React.useEffect((()=>{if(0===M)return;const[e,t]=y(h.current,D.current,g);I(e),j(t)}),[g,M,h,D]);const z=e.hooks.useEventCallback(((e,t=!0)=>{const o=t?1:g;let i=0,a=0;e?(i=p-o,i<0?(i=0,a=i+g):a=N-o):(a=N+o,a>d?(a=d,i=a-g):i=p+o),I(i),j(a)})),O=e.React.useRef([]),w=e.hooks.useEventCallback((()=>{const e=d>0&&O.current.length>0&&a[a.length-1]!==O.current[O.current.length-1];if(u&&e&&O.current.length>d){let e=0,t=0;t=d,e=t-g,e=Math.max(0,e),I(e),j(t)}}));return e.React.useEffect((()=>{w(),O.current=a}),[a,w]),{start:p,end:N,disablePrevious:m,disableNext:T,hideArrow:x,scroll:z}})({rootRef:m,lists:l,itemLength:c,autoSize:I,vertical:s,space:u,minLength:g,autoScrollEnd:p}),b=l.slice(z,O),L=((t,o,i,a,n)=>e.css`
    width: 100%;
    height: 100%;
    display: flex;
    background: #FFF;
    border-radius: 6px;
    align-items: center;
    justify-content: center;
    button.previous, button.next {
      flex-shrink: 0;
      display: ${n?"none":"block"};
    }
    .root {
      flex-direction: ${t?"column":"row"};
      width: 100%;
      height: 100%;
      ${t?`min-height: ${i}px;`:`min-width: ${i}px;`} 
      max-height: ${a?"100%":"calc(100% - 20px)"};
      max-width: ${a?"100%":"calc(100% - 20px)"};
      display: flex;
      justify-content: center;
      flex-wrap: nowrap;
      align-items: center;
      .scroll-list-item {
        &:not(:first-of-type) {
          margin-top: ${t?o+"px":"unset"};
          margin-left: ${t?"unset":o+"px"};
        }
      }
    }
`)(s,u,g,I,S);e.React.useEffect((()=>{null==N||N(S,w,f)}),[f,w,S,N]),e.React.useEffect((()=>{t.utils.setRef(a,A)}),[A,a]);return(0,e.jsx)(t.NavButtonGroup,Object.assign({},h,{css:L,type:"tertiary",vertical:s,onChange:e=>{null==d||d(e),A(e,!0)},disablePrevious:w,disableNext:f,previousAriaLabel:x("previous"),nextAriaLabel:x("next"),className:(0,e.classNames)("scroll-list",n)}),(0,e.jsx)("div",{className:"root scroll-list-root",ref:T},l.map((t=>{const o=!b.includes(t);return r(t,(0,e.classNames)("scroll-list-item",{"d-none":o}))}))))}));var x=l(2838),m=l.n(x);const T=o=>{var i,a;const{markerEnabled:n,onMarkerClick:l,widgetid:r,showLabel:s,showIndicator:c,showTooltip:u,labelGrowth:d,avatar:M,onClick:g,active:p,editDraggable:I,className:v}=o,y=e.ReactRedux.useSelector((e=>{var t;return null===(t=e.appConfig.widgets)||void 0===t?void 0:t[r]}));return y?e.React.createElement(N,{"data-widgetid":r,widgetid:r,className:`widget-avatar-card ${v}`,showLabel:s,showIndicator:c,showTooltip:u,labelGrowth:d,avatar:M,label:y.label,icon:y.icon,autoFlip:null===(a=null===(i=null==y?void 0:y.manifest)||void 0===i?void 0:i.properties)||void 0===a?void 0:a.flipIcon,marker:n?m():"",active:p,editDraggable:I,onMarkerClick:l,onClick:g}):e.React.createElement(t.Loading,null)};l(9859);(0,l(1888).styled)("div",{shouldForwardProp:e=>!["vertical","space"].includes(e)})`
  display: flex;
  align-items: center;
  justify-content: center;
  flex-direction: ${e=>e.vertical?"column":"row"};
  .avatar-placeholder {
    &:not(:first-of-type) {
      margin-top: ${t=>t.vertical?e.polished.rem(t.space):"unset"};
      margin-left: ${t=>t.vertical?"unset":e.polished.rem(t.space)};
    }
  }
`,(e=>{const t=[];for(;e>0;)t.push(e),e--})(3);var z=l(1496);const O=(t,o)=>{const i=e.ReactRedux.useSelector((e=>e.widgetsRuntimeInfo)),a=w(t,o),n=f(a);return e.React.useMemo((()=>{const t={};return n.forEach((o=>{var a;const n=null!==(a=null==i?void 0:i[o])&&void 0!==a?a:{isClassLoaded:!1};t[o]=(0,e.Immutable)(n)})),(0,e.Immutable)(t)}),[n,i])},w=(t,o)=>e.ReactRedux.useSelector((e=>{var i,a,n,l;const r=null===(n=null===(a=null===(i=e.appConfig.widgets)||void 0===i?void 0:i[t])||void 0===a?void 0:a.layouts)||void 0===n?void 0:n[o],s=e.browserSizeMode,c=e.appConfig.mainSizeMode,u=z.searchUtils.findLayoutId(r,s,c);return null===(l=e.appConfig.layouts)||void 0===l?void 0:l[u]})),f=e=>{const t=(e=>{var t,o,i;let a=(null!==(i=null===(o=null===(t=null==e?void 0:e.order)||void 0===t?void 0:t.asMutable)||void 0===o?void 0:o.call(t))&&void 0!==i?i:[]).map((t=>{var o;return null===(o=e.content)||void 0===o?void 0:o[t]}));return a=a.filter((e=>e&&e.id&&e.widgetId&&!e.isPending)),a.map((e=>e.id))})(e);return t.map((t=>{var o,i;return null===(i=null===(o=e.content)||void 0===o?void 0:o[t])||void 0===i?void 0:i.widgetId}))},S=(e,t)=>{if(null!=(null==e?void 0:e.content)&&t)return Object.keys(e.content).find((o=>e.content[o].widgetId===t))},A=t=>[e.WidgetState.Opened,e.WidgetState.Active].includes(t.state);var b=function(e,t){var o={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(o[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(i=Object.getOwnPropertySymbols(e);a<i.length;a++)t.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(e,i[a])&&(o[i[a]]=e[i[a]])}return o};function L(o){const{widgetId:i,canCrossLayoutBoundary:a,className:n,layoutId:l,layoutItemId:r}=o,s=b(o,["widgetId","canCrossLayoutBoundary","className","layoutId","layoutItemId"]),c=e.hooks.useCancelablePromiseMaker(),[u,d]=e.React.useState(null),[M,g]=e.React.useState(""),[p,I]=e.React.useState("");e.React.useEffect((()=>{d(null),g("");const t=c((t=>{var o,i;if(!t)return;return(null===(i=null===(o=(0,e.getAppStore)().getState().widgetsRuntimeInfo)||void 0===o?void 0:o[t])||void 0===i?void 0:i.isClassLoaded)?Promise.resolve(e.WidgetManager.getInstance().getWidgetClass(t)):e.WidgetManager.getInstance().loadWidgetClass(t)})(i));t.then((e=>{d(e),g(i)}),(e=>{var t;I(null!==(t=null==e?void 0:e.message)&&void 0!==t?t:e)}))}),[c,i]);const N=e.React.useCallback((()=>{var t,o;if(p)return;if(window.jimuConfig.isBuilder)return;(null===(o=null===(t=(0,e.getAppStore)().getState().widgetsRuntimeInfo)||void 0===t?void 0:t[i])||void 0===o?void 0:o.state)===e.WidgetState.Active||(0,e.getAppStore)().dispatch(e.appActions.activateWidget(i))}),[p,i]),v=e.ReactRedux.useSelector((t=>t.appRuntimeInfo.appMode===e.AppMode.Design)),y=e.ReactRedux.useSelector((e=>{var t,o,a;const n=e.appConfig.widgets[i];return null!==(a=null===(o=null===(t=null==n?void 0:n.manifest)||void 0===t?void 0:t.properties)||void 0===o?void 0:o.supportInlineEditing)&&void 0!==a&&a})),j=e.ReactRedux.useSelector((e=>{const t=e.widgetsRuntimeInfo[i];return y&&(null==t?void 0:t.isInlineEditing)})),D=e.ReactRedux.useSelector((t=>{var o;const a=t.appConfig.widgets[i];return(null===(o=null==a?void 0:a.manifest)||void 0===o?void 0:o.widgetType)!==e.WidgetType.Layout})),h=e.ReactRedux.useSelector((e=>{var t,o,a;const n=e.appConfig.widgets[i];return(null===(o=null===(t=null==n?void 0:n.manifest)||void 0===t?void 0:t.properties)||void 0===o?void 0:o.hasEmbeddedLayout)&&Object.keys(null!==(a=n.layouts)&&void 0!==a?a:{}).length>0})),x=v&&!j&&D&&!h,m=e.React.useCallback((t=>{y&&(t.stopPropagation(),(0,e.getAppStore)().dispatch(e.appActions.setWidgetIsInlineEditingState(i,!0)))}),[i,y]),T=(0,e.classNames)("widget-renderer w-100 h-100",n),z=(t=>e.React.useMemo((()=>e.css`
      overflow: ${t?"visible":"hidden"};
      position: relative;
      .widget-content {
        position: relative;
        height: 100%;
        width: 100%;
        z-index: 0;
      }
      .widget-mask {
        position: absolute;
        background: transparent;
        left: 0;
        right: 0;
        top: 0;
        bottom: 0;
        z-index: 1;
      }
  `),[t]))(a);return(0,e.jsx)("div",Object.assign({css:z,className:T,onMouseDownCapture:N,onDoubleClickCapture:m,"data-widgetid":M},s),(0,e.jsx)("div",{className:"widget-content p-1"},p,!p&&u&&(0,e.jsx)(e.ErrorBoundary,null,(0,e.jsx)(u,{widgetId:M,layoutId:l,layoutItemId:r})),!p&&!u&&(0,e.jsx)(t.Loading,null)),x&&(0,e.jsx)("div",{className:"widget-mask"}))}const E=(0,e.Immutable)({}),C=i=>{var a,n,l;const{controllerId:r,containerMapId:s,onClose:c,widgets:u=E}=i,d=null!==(a=Object.keys(u).find((e=>A(u[e]))))&&void 0!==a?a:"",M=null===(l=null===(n=(0,e.getAppStore)().getState().appConfig.widgets)||void 0===n?void 0:n[d])||void 0===l?void 0:l.label,g=w(r,o),p=e.React.useCallback(((t,o)=>{var i;t.stopPropagation();const a=null==g?void 0:g.id,n=S(g,o),l=null===(i=(0,e.getAppStore)().getState().appRuntimeInfo)||void 0===i?void 0:i.selection;l&&l.layoutId===a&&l.layoutItemId===n||(0,e.getAppStore)().dispatch(e.appActions.selectionChanged({layoutId:a,layoutItemId:n}))}),[g]);return e.React.createElement(t.MobilePanel,{className:(0,e.classNames)("mobile-widget-launcher",{"d-none":!d}),mapWidgetId:s,title:M,open:!!d,keepMount:!0,onClick:e=>{p(e,d)},onClose:e=>{null==e||e.stopPropagation(),null==e||e.nativeEvent.stopImmediatePropagation(),null==c||c(d)}},Object.entries(u).map((([t,o])=>{if(!(void 0!==o.state))return null;const i=A(o),a=null==g?void 0:g.id,n=S(g,t);return e.React.createElement(L,{key:t,widgetId:t,layoutId:a,layoutItemId:n,onClick:e=>{p(e,t)},className:(0,e.classNames)({"d-none":!i})})})))};var k;!function(e){e.Stack="STACK",e.SideBySide="SIDEBYSIDE"}(k||(k={}));const R={_widgetLabel:"Widget Controller",_action_openWidget_label:"Open widget",resizerTooltip:"Customize the window size by dragging and dropping."},U=e=>document.querySelector(`.widget-controller .avatar-card[data-widgetid='${e}']`),Q=()=>{const t=`url("data:image/svg+xml;base64,${window.btoa('<svg xmlns="http://www.w3.org/2000/svg" width="10" height="10" viewBox="0 0 10 10" fill="none">\n    <g clip-path="url(#rectangle)">\n      <path d="M10 2.77832V0L0 10H2.77832L10 2.77832Z" fill="#000000" />\n      <path d="M10 5.60674L5.60675 10H10V5.60674Z" fill="#000000" />\n    </g>\n    <defs>\n      <clipPath id="rectangle">\n        <rect width="10" height="10" fill="white" />\n      </clipPath>\n    </defs>\n  </svg>')}")`;return e.css`
    .resizer {
      bottom: 4px !important;
      right: 4px !important;
      background-color: var(--sys-color-secondary-dark);
      mask-image: ${t};
      border: none !important;
    }
  `},Y=()=>e.css`
    .resizer {
      width: 9px !important;
      height: 9px !important;
      position: absolute;
      bottom: 4px !important;
      right: 4px !important;
      border: 1px solid #000 !important;
      background: #fff;
      clip-path: polygon(5px 0px, 9px 0px, 9px 9px, 0px 9px, 0px 5px, 5px 5px);
      &::before {
        content: '';
        position: absolute;
        width: 5px;
        height: 5px;
        border-right: 1px solid #000;
        border-bottom: 1px solid #000;
      }
    }
  `,W=()=>{const o=e.hooks.useTranslation(R),i=e.React.useMemo((()=>e.css`
    position: absolute;
    width: 15px;
    height: 15px;
    bottom: 0;
    right: 0;
  `),[]);return e.React.useMemo((()=>(0,e.jsx)(t.Tooltip,{title:o("resizerTooltip")},(0,e.jsx)("div",{className:"resizer-tooltip",css:i}))),[i,o])},P=(t,i)=>{const a=((t,o)=>{var i,a,n,l;const r=(0,e.getAppStore)().getState().appConfig,s=(0,e.getAppStore)().getState().browserSizeMode,c=null===(n=null===(a=null===(i=r.widgets)||void 0===i?void 0:i[t])||void 0===a?void 0:a.layouts)||void 0===n?void 0:n[o],u=z.searchUtils.findLayoutId(c,s,r.mainSizeMode);return null===(l=r.layouts)||void 0===l?void 0:l[u]})(i,o),n=Object.keys(a.content).find((e=>a.content[e].widgetId===t));(0,e.getAppStore)().dispatch(e.appActions.selectionChanged({layoutId:a.id,layoutItemId:n}))},B=()=>document.body.getBoundingClientRect(),$=(t,o,i,a,n)=>{const[l,r]=e.React.useState((()=>B())),[s,c]=e.React.useState([i]),u=e.React.useRef(0);e.React.useEffect((()=>{const e=()=>{const e=B();r(e)};return window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}}),[]);const d=(e,t)=>e.right>=t.right||e.left<=t.left,M=(e,t)=>e.bottom>=t.bottom||e.top<=t.top,g=e.hooks.useEventCallback((e=>{if(u.current++,u.current>7)return console.warn(`Number of cycles: ${u.current}.You may have opened too many panels, and now there is not enough space for them to be placed without overstepping and blocking`),e;const o=((e,t)=>!(!e||!t)&&(d(e,t)||M(e,t)))(e,l);if(!o)return e;const{width:a,height:r}=e;let{left:s,top:c,right:p,bottom:I}=e;if(o){const e=d({left:s,top:c,right:p,bottom:I,width:a,height:r},l),o=M({left:s,top:c,right:p,bottom:I,width:a,height:r},l);e&&(s=t===k.SideBySide?i.x:l.right-a),o||t!==k.SideBySide||(c+=n),p=s+a,I=c+r}return g({left:s,top:c,right:p,bottom:I,width:a,height:r})}));return e.React.useEffect((()=>{const e=[];let l={width:0,height:0};Object.keys(o).forEach(((r,s)=>{const c=o[r],d=0!==s?e[s-1]:i;let{x:M,y:p}=d;if(t===k.SideBySide){const{width:e}=l;M+=a>0?e:-e,M+=0!==s?a:0}else t===k.Stack&&(M+=0!==s?a:0,p+=0!==s?n:0);const I={left:M,top:p,right:M+c.width,bottom:p+c.height,width:c.width,height:c.height},{left:N,top:v}=g(I);u.current>7?(M=d.x,p=d.y):(M=N,p=v),u.current=0,e.push({x:M,y:p}),l=c})),c(e)}),[t,i,a,n,l.width,l.height,g,o]),s},V=(0,e.Immutable)({}),F=i=>{const{mode:a,start:l,spaceX:r,spaceY:s,sizes:c,controllerId:u,widgets:d=V,onResizeStop:M,onClose:g}=i,p=e.ReactRedux.useSelector((e=>e.appConfig.widgets)),[I,N]=e.React.useState(c),v=e.React.useMemo((()=>((t,o)=>{let i=(0,e.Immutable)({});return Object.keys(t).forEach((e=>{i=i.set(e,o[e]||n)})),i})(d,I)),[I,d]),y=w(u,o),j=e.React.useCallback(((t,o)=>{var i;t.stopPropagation();const a=null==y?void 0:y.id,n=S(y,o),l=null===(i=(0,e.getAppStore)().getState().appRuntimeInfo)||void 0===i?void 0:i.selection;l&&l.layoutId===a&&l.layoutItemId===n||(0,e.getAppStore)().dispatch(e.appActions.selectionChanged({layoutId:a,layoutItemId:n}))}),[y]),D=e=>{const t=U(e),o=null==t?void 0:t.querySelector("button");null==o||o.focus()},[h,x]=e.React.useState(!1),m=$(a,v,l,r,s),T=e.ReactRedux.useSelector((t=>t.appRuntimeInfo.appMode===e.AppMode.Run)),z=T?Q():Y();return(0,e.jsx)(e.React.Fragment,null,Object.entries(d).map((([o,i],a)=>{var n;if(!(void 0!==i.state))return null;const l=A(i),r=m[a];if(!r)return null;const s=v[o],c=null===(n=null==p?void 0:p[o])||void 0===n?void 0:n.label,u=null==y?void 0:y.id,d=S(y,o);return(0,e.jsx)(t.FloatingPanel,{key:o,css:z,style:{maxWidth:"100vw"},headerTitle:c,defaultPosition:r,defaultSize:s,className:(0,e.classNames)({"d-none":!l},"multiple-widget-launcher"),showHeaderClose:!0,showHeaderCollapse:!0,activateOnlyForHeader:!0,autoFocus:l,dragBounds:"body",onClick:e=>{j(e,o)},onResize:e=>{((e,t)=>{N(I.set(e,t)),x(!0)})(o,e)},onResizeStop:e=>{((e,t)=>{null==M||M(e,t),x(!1)})(o,e)},onLeave:()=>{D(o)},onHeaderClose:e=>{((e,t)=>{null==t||t.stopPropagation(),null==g||g(e),D(e)})(o,e)}},(0,e.jsx)(e.React.Fragment,null,(0,e.jsx)(L,{widgetId:o,layoutId:u,layoutItemId:d}),!h&&!T&&(0,e.jsx)(W,null)))})))},H=(0,e.Immutable)({}),G=i=>{const{controllerId:l,widgets:r=H,root:s,placement:c,sizes:u,onResizeStop:M,onClose:g}=i,p=e.ReactRedux.useSelector((e=>e.appConfig.widgets)),I=w(l,o),N=e.React.useCallback(((t,o)=>{var i;t.stopPropagation();const a=null==I?void 0:I.id,n=S(I,o),l=null===(i=(0,e.getAppStore)().getState().appRuntimeInfo)||void 0===i?void 0:i.selection;l&&l.layoutId===a&&l.layoutItemId===n||(0,e.getAppStore)().dispatch(e.appActions.selectionChanged({layoutId:a,layoutItemId:n}))}),[I]),[v,y]=e.React.useState(u),[j,D]=e.React.useState(!1),h=(e,t)=>{var o;t.stopPropagation(),null==g||g(e);const i=null===(o=U(e))||void 0===o?void 0:o.querySelector("button");null==i||i.focus()},x=e.ReactRedux.useSelector((t=>t.appRuntimeInfo.appMode===e.AppMode.Run)),m=x?Q():Y();return(0,e.jsx)(e.React.Fragment,null,Object.entries(r).map((([o,i])=>{var l,r;if(!(void 0!==i.state))return null;const u=i.state!==e.WidgetState.Closed,g=null!==(l=v[o])&&void 0!==l?l:n,T=null===(r=null==p?void 0:p[o])||void 0===r?void 0:r.label;let z=U(o);z&&z.offsetParent||(z=null==s?void 0:s.querySelector(".avatar-card"));const O=null==I?void 0:I.id,w=S(I,o);return(0,e.jsx)(t.Popper,{key:o,css:m,style:{maxWidth:"100vw"},modifiers:d,className:(0,e.classNames)({"d-none":!u},"single-widget-launcher"),headerTitle:T,activateOnlyForHeader:!0,minSize:a,dragBounds:"body",defaultSize:g,onResize:e=>{var t,i;t=o,i=e,y((e=>e.set(t,i))),D(!0)},onResizeStop:e=>{var t,i;t=o,i=e,null==M||M(t,i),D(!1)},onHeaderClose:e=>{h(o,e)},showHeaderCollapse:!0,floating:!0,open:!0,autoFocus:u,reference:z,toggle:e=>{((e,t)=>{"Escape"===(null==t?void 0:t.key)&&h(e,t)})(o,e)},onClick:e=>{N(e,o)},placement:c},(0,e.jsx)(L,{widgetId:o,layoutId:O,layoutItemId:w}),!j&&!x&&(0,e.jsx)(W,null))})))},_=t=>{const o=(0,e.getAppStore)().getState().appConfig.sections,i=Object.values(null!=o?o:{}).find((e=>{var o;return null===(o=e.views)||void 0===o?void 0:o.includes(t)}));return null==i?void 0:i.id},Z=(t,o)=>{const i=(t=>{const o=(0,e.getAppStore)().getState().appConfig.sections,i=t?Object.values(t).map((e=>e.currentViewId)):[],a=i.map(_),n=Object.values(null!=o?o:{}).map((e=>{var t;if(!a.includes(e.id))return null===(t=e.views)||void 0===t?void 0:t[0]})).filter((e=>!!e)),l=i;return n.forEach((e=>{i.includes(e)||l.push(e)})),l})(t),a=(0,e.getAppStore)().getState().browserSizeMode,n=(0,e.getAppStore)().getState().appConfig,l=z.searchUtils.getContentContainerInfo(n,o,e.LayoutItemType.Widget,a);let r=!0;if(!l)return r;if(l.type===e.ContainerType.View)if(i.includes(l.id)){const t=l.id,o=_(t),s=z.searchUtils.getContentContainerInfo(n,o,e.LayoutItemType.Section,a);s&&s.type===e.ContainerType.View&&(i.includes(s.id)||(r=!1))}else r=!1;return r};function J(t){var i,a,l,r,u,d,M,g,p,I;const{id:N,config:v,version:y,rootRef:j,onResizeStop:D}=t,h=e.hooks.useCheckSmallBrowserSizeMode(),x=null===(i=v.behavior)||void 0===i?void 0:i.onlyOpenOne,m=null!==(l=null===(a=null==v?void 0:v.behavior)||void 0===a?void 0:a.arrangement)&&void 0!==l?l:"floating",T=x&&"floating"===m,w=!x&&"floating"===m,f=e.React.useCallback((t=>{if(!t)return;(0,e.getAppStore)().dispatch(e.appActions.closeWidget(t));const o=U(t);null==o||o.focus(),(0,e.getAppStore)().dispatch(e.appActions.selectionChanged(null))}),[]),S=(t=>e.ReactRedux.useSelector((e=>{var o,i,a,n;const l=e.appConfig,r=e.browserSizeMode,s=l.widgets[t].parent;let c=null!==(o=s[r])&&void 0!==o?o:[];0===c.length&&(c=null!==(i=s[l.mainSizeMode])&&void 0!==i?i:[]);const u=null===(a=c[0])||void 0===a?void 0:a.layoutId,d=z.searchUtils.getWidgetIdThatUseTheLayoutId(l,u),M=l.widgets[d];return"arcgis-map"===(null===(n=null==M?void 0:M.manifest)||void 0===n?void 0:n.name)?M.id:""})))(N),b=(null===(r=v.behavior)||void 0===r?void 0:r.vertical)?"right-start":"bottom",L=null===(u=v.behavior)||void 0===u?void 0:u.displayType,E=null===(g=null===(M=null===(d=(0,e.getAppStore)())||void 0===d?void 0:d.getState())||void 0===M?void 0:M.appContext)||void 0===g?void 0:g.isRTL,k=e.React.useMemo((()=>E?Object.assign(Object.assign({},s),{x:document.body.clientWidth-n.width-s.x}):s),[E]),R=e.React.useMemo((()=>E?Object.assign(Object.assign({},c),{x:-c.x}):c),[E]),Q=null===(p=v.behavior)||void 0===p?void 0:p.size,Y=O(N,o),W=Object.keys(Y),P=W.filter((e=>A(Y[e]))),B=e.ReactRedux.useSelector((e=>e.appRuntimeInfo.currentPageId));e.hooks.useUpdateEffect((()=>{(0,e.getAppStore)().dispatch(e.appActions.resetWidgetsState(W))}),[y,B]);const $=(t=>{const o=e.ReactRedux.useSelector((e=>{var t;return null===(t=e.appRuntimeInfo)||void 0===t?void 0:t.sectionNavInfos}));return Z(o,t)})(N),V=e.ReactRedux.useSelector((e=>e.appContext.isInBuilder)),H=null===(I=v.behavior)||void 0===I?void 0:I.openStarts;return e.hooks.useUpdateEffect((()=>{$?!V&&(null==H?void 0:H.length)>0&&setTimeout((()=>{(0,e.getAppStore)().dispatch(e.appActions.openWidgets(H,N))}),1e3):(0,e.getAppStore)().dispatch(e.appActions.closeWidgets(P))}),[$]),e.React.useEffect((()=>{V&&(0,e.getAppStore)().dispatch(e.appActions.resetWidgetsState(W)),!V&&(null==H?void 0:H.length)&&$&&setTimeout((()=>{(0,e.getAppStore)().dispatch(e.appActions.openWidgets(H,N))}),1e3)}),[]),(0,e.jsx)(e.React.Fragment,null,h&&(0,e.jsx)(C,{containerMapId:S,controllerId:N,widgets:Y,onClose:f}),!h&&T&&(0,e.jsx)(G,{sizes:Q,root:j.current,placement:b,controllerId:N,widgets:Y,onResizeStop:D,onClose:f}),!h&&w&&(0,e.jsx)(F,{sizes:Q,mode:L,start:k,spaceX:R.x,spaceY:R.y,controllerId:N,widgets:Y,onResizeStop:D,onClose:f}))}var K=l(9839),q=l.n(K);const X=t=>{var i,a,n,l,r,s;const{id:c,config:u,version:d,autoSize:M}=t,p=null===(i=u.behavior)||void 0===i?void 0:i.onlyOpenOne,I=null===(a=u.behavior)||void 0===a?void 0:a.vertical,N=null===(n=null==u?void 0:u.appearance)||void 0===n?void 0:n.card,v=((e,t)=>{const o=null==e?void 0:e.showLabel,i=null==e?void 0:e.labelGrowth,a=null==e?void 0:e.avatar.size,n=null==e?void 0:e.avatar.shape;return g(a,o,n)+t+i})(null===(l=null==u?void 0:u.appearance)||void 0===l?void 0:l.card,null===(r=null==u?void 0:u.appearance)||void 0===r?void 0:r.space),y=e.hooks.useCheckSmallBrowserSizeMode(),j=e.React.useRef(null),[D,x]=e.React.useState(!1),m=O(c,o),z=Object.keys(m),w=z.filter((e=>A(m[e]))),f=e.React.useCallback((t=>{var o;const i=null===(o=t.currentTarget.dataset)||void 0===o?void 0:o.widgetid;if(!i)return;const a=!!y||p;w.includes(i)||t.stopPropagation(),((t,o,i,a)=>{a?((0,e.getAppStore)().dispatch(e.appActions.closeWidgets(i)),i.includes(o)||((0,e.getAppStore)().dispatch(e.appActions.openWidget(o,t)),P(o,t))):i.includes(o)?(0,e.getAppStore)().dispatch(e.appActions.closeWidget(o)):((0,e.getAppStore)().dispatch(e.appActions.openWidget(o,t)),P(o,t))})(c,i,w,a)}),[y,p,w,c]),S=e.React.useCallback(((t,o)=>{const i=w.includes(t);return e.React.createElement(T,Object.assign({},N,{key:t,className:`${o} layout-item`,widgetid:t,markerEnabled:!1,active:i,onClick:f,style:{fontSize:"1px",width:"50px",height:"50px"}}))}),[N,f,w]);return e.React.createElement("div",{className:"controller-runtime w-100 h-100"},e.React.createElement("div",{className:"toggle-info-list-button",onClick:()=>{x((e=>!e))},onMouseEnter:()=>{document.querySelector(".toggle-info-list-button").style.border="2px solid rgb(37, 143, 255)"},onMouseLeave:()=>{document.querySelector(".toggle-info-list-button").style.border="2px solid transparent"},style:{display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"6px",border:"2px solid transparent",cursor:"pointer",width:"109px",height:"42px",background:`url(${q()})`}}),e.React.createElement(J,{id:c,config:u,version:d,rootRef:j}),D&&e.React.createElement(h,{ref:j,className:"runtime--scroll-list",vertical:I,itemLength:v,space:null===(s=u.appearance)||void 0===s?void 0:s.space,autoHideArrow:!0,autoSize:M,lists:z,createItem:S}))},ee={behavior:{onlyOpenOne:!0,openStarts:[],displayType:"STACK",vertical:!1,size:{}},appearance:{space:0,advanced:!1,card:{showLabel:!1,labelGrowth:10,showTooltip:!0,showIndicator:!1,avatar:{type:"primary",size:"default",shape:"circle"}}}};class te extends e.BaseVersionManager{constructor(){super(...arguments),this.versions=[{version:"1.0.0",description:"Version manager for release 1.0.0",upgrader:e=>{if(!e)return ee;if(e.behavior&&e.appearance)return e;{let o=e;return e.behavior||(o=o.setIn(["behavior","openStarts"],[]),o=o.setIn(["behavior","onlyOpenOne"],e.onlyOpenOne),o=o.setIn(["behavior","displayType"],e.displayType),o=o.setIn(["behavior","vertical"],e.vertical),o=o.setIn(["behavior","size"],e.size),o=o.without(["onlyOpenOne","displayType","size"])),e.appearance||(o=o.setIn(["appearance","advanced"],!1),e.vertical?o=o.setIn(["appearance","space"],e.space):(o=o.setIn(["appearance","space"],0),o=o.setIn(["appearance","card","labelGrowth"],e.space)),o=o.setIn(["appearance","card","showLabel"],e.showLabel),o=o.setIn(["appearance","card","avatar","size"],"SMALL"===(t=e.iconSize)?"sm":"MEDIUM"===t?"default":"LARGE"===t?"lg":t),o=o.setIn(["appearance","card","avatar","shape"],e.iconStyle),o=o.setIn(["appearance","card","avatar","type"],"primary"),o=o.without(["space","showLabel","iconSize","iconStyle","vertical"])),o}var t}},{version:"1.1.0",description:"Version manager for release 1.1.0",upgrader:e=>{var t,o;if(!e)return ee;let i=null===(t=null==e?void 0:e.appearance)||void 0===t?void 0:t.card;const a=null==i?void 0:i.variants,n=null===(o=null==i?void 0:i.avatar)||void 0===o?void 0:o.type;let l=e;if(a){const e=((e,t="primary")=>null==e?void 0:e[t])(a,n);i=null==i?void 0:i.set("variant",e).without("variants"),l=l.setIn(["appearance","card"],i)}return l}},{version:"1.6.0",description:"Version manager for release 1.6.0",upgrader:e=>{var t;if(!e)return ee;let o=null===(t=null==e?void 0:e.appearance)||void 0===t?void 0:t.card,i=e;return o&&(o=o.set("showTooltip",!0),i=i.setIn(["appearance","card"],o)),i}},{version:"1.14.0",description:"Version manager for release 1.14.0",upgrader:e=>{var t;if(!e)return ee;let o=null===(t=null==e?void 0:e.appearance)||void 0===t?void 0:t.card,i=e;return o&&(o=o.set("showIndicator",!1),i=i.setIn(["appearance","card"],o)),i}}]}}const oe=new te,ie=o=>{var a,n,l,r;const{builderSupportModules:s,id:c,config:u,onInitResizeHandler:d,autoWidth:M,autoHeight:g}=o,p=null===(a=u.behavior)||void 0===a?void 0:a.onlyOpenOne,I=null===(n=u.behavior)||void 0===n?void 0:n.displayType,N=null===(l=null==u?void 0:u.behavior)||void 0===l?void 0:l.vertical,v=null==u?void 0:u.appearance.advanced,y=null===(r=null==u?void 0:u.appearance)||void 0===r?void 0:r.card.variant,j=N?g:M,D=e.ReactRedux.useSelector((e=>e.appContext.isInBuilder)),h=e.ReactRedux.useSelector((e=>e.appRuntimeInfo.appMode));e.React.useEffect((()=>{null==d||d(null,null,(()=>{z((e=>e+1))}))}),[d]);const x=D&&h!==e.AppMode.Run,m=x&&s.widgetModules.Builder,[T,z]=e.React.useState(0);e.hooks.useUpdateEffect((()=>{z((e=>e+1))}),[p,I,h]);const O=((t,o,a)=>{const n=t?0:i.sm,l=t?0:i.sm,r=o?"0px":0,s=a?"0px":0;return e.React.useMemo((()=>e.css`
      overflow: visible;
      white-space: nowrap;
      .controller-container {
        width: 100%;
        height: 100%;
        padding: ${r} ${s};
        min-width:  ${n}px;
        min-height: ${l}px;
      }
    `),[r,s,n,l])})(j,M,g),w=((o,i)=>{const a=null==o?void 0:o.default,n=null==o?void 0:o.active,l=null==o?void 0:o.hover;return e.React.useMemo((()=>i?e.css`
      .avatar-card:not(.add-widget-btn) {
        ${a&&e.css`
          > .avatar {
            > .avatar-button {
              background-color: ${a.bg};
              border-color: ${a.bg};
            }
          }
          > .avatar-label {
            font-size: 10px;
            color: ${a.color};
            font-style: ${(null==a?void 0:a.italic)?"italic":"normal"};
            font-weight: ${(null==a?void 0:a.bold)?"bold":"normal"};
            text-decoration: ${t.styleUtils.toCSSTextUnderLine({underline:a.underline,strike:a.strike})};
          }
        `}
        ${l&&e.css`
          &:hover {
            > .avatar {
              > .avatar-button {
                background-color: ${l.bg};
                border-color: ${l.bg};
              }
            }
            > .avatar-label {
              color: ${l.color};
              font-style: ${(null==l?void 0:l.italic)?"italic":"normal"};
              font-weight: ${(null==l?void 0:l.bold)?"bold":"normal"};
              text-decoration: ${t.styleUtils.toCSSTextUnderLine({underline:l.underline,strike:l.strike})};
            }
          }
        `}
        ${n&&e.css`
          > .avatar {
            > .avatar-button {
              &:not(:disabled):not(.disabled):active,
              &:not(:disabled):not(.disabled).active,
              &[aria-expanded='true'] {
                background-color: ${n.bg};
                border-color: ${n.bg};
              }
            }
            &::after {
              background-color: ${n.bg};
            }
          }
          > .avatar-label {
            &:not(:disabled):not(.disabled):active,
            &:not(:disabled):not(.disabled).active {
              color: ${n.color};
              font-style: ${(null==n?void 0:n.italic)?"italic":"normal"};
              font-weight: ${(null==n?void 0:n.bold)?"bold":"normal"};
              text-decoration: ${t.styleUtils.toCSSTextUnderLine({underline:n.underline,strike:n.strike})};
            }
          }
        `}
      }
    `:e.css``),[i,a,n,l])})(y,v);return(0,e.jsx)("div",{className:"widget-controller jimu-widget rw-controller",css:[O,w]},(0,e.jsx)("div",{className:"controller-container"},!x&&(0,e.jsx)(X,{id:c,version:T,config:u,autoSize:j}),x&&m&&(0,e.jsx)(m,{id:c,version:T,config:u,autoSize:j})))};ie.versionManager=oe;const ae=ie;function ne(e){l.p=e}})(),r})())}}}));